//! point.js v 0.1
//! url: https://pointjs.org
((point,document)=>{const simulateClick=a=>{const b=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}),c=!a.dispatchEvent(b)};point.domRouterStates={"*":document.body.outerHTML};const doRoute=()=>{const ext_route=document.querySelectorAll(`[dom-route-container]`);ext_route.forEach((item,ix)=>{item.addEventListener("click",e=>{if(e.preventDefault(),item.pathname==window.location.pathname&&point.domRouterStates[item.pathname])return;window.history.pushState({},item.pathname,item.pathname);let template,data,containerId=item.getAttribute("dom-route-container"),container=document.querySelectorAll(`[dom-container=${containerId}]`)[0];if(container){container.style.display="none";const rendered=document.querySelectorAll(`*[dom-component=${containerId}]`);for(let a=0;a<rendered.length;a++)rendered[a].parentNode.removeChild(rendered[a]);if(item.hasAttribute("dom-route-html"))container.setAttribute("id",containerId),template=item.getAttribute("dom-route-html"),item.hasAttribute("dom-route-json")?(data=item.getAttribute("dom-route-json"),point.load(template,data,containerId,!1)):item.hasAttribute("dom-route-data")?(data=window[item.getAttribute("dom-route-data")],point.loadHTML(template,containerId,data,!1)):point.loadHTML(template,containerId,{},!1);else if(item.hasAttribute("dom-route-component")){const componentId=item.getAttribute("dom-route-component"),component=document.querySelectorAll(`[dom-component=${componentId}]`)[0];if(!component)return;template=component.cloneNode(!0),template.setAttribute("dom-component",containerId),container.insertAdjacentHTML("beforebegin",template.outerHTML),item.hasAttribute("dom-route-json")?(data=item.getAttribute("dom-route-json"),point.loadJSON(data,containerId,!1)):item.hasAttribute("dom-route-data")&&(data=eval(item.getAttribute("dom-route-data")),point.render(containerId,data,!1))}point.routerTimeout=setTimeout(()=>{point.domRouterStates[item.pathname]={container:containerId,template:document.querySelectorAll(`*[dom-component=${containerId}]`)[0].outerHTML,data:data,json:item.hasAttribute("dom-route-json")}},2500)}}),item.pathname==window.location.pathname&&simulateClick(item)})};point.route=()=>{clearTimeout(point.routerTimeout),doRoute(),window.onpopstate=()=>{if(clearTimeout(point.routerTimeout),point.domRouterStates[window.location.pathname]){const a=point.domRouterStates[window.location.pathname],b=document.querySelectorAll(`[dom-rendered=${a.container}],[dom-component=${a.container}]`);for(let a=0;a<b.length;a++)b[a].parentNode.removeChild(b[a]);const c=document.querySelectorAll(`[dom-container=${a.container}]`)[0];c.insertAdjacentHTML("beforebegin",a.template),a.json?point.loadJSON(a.data,a.container,!1):point.render(a.container,a.data,!1)}else document.body.innerHTML=point.domRouterStates["*"],point.route()}},point.ready(point.route)})(window.point=window.point||{},document);
